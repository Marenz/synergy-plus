#summary How to build Synergy using Visual C++ 2005 Express Edition
#labels Deprecated

Synergy+ can be compiled using either Visual C++ 2005 or [CompilingVC2008 Visual C++ 2008]. However, the 2005 version requires more effort to get ready for building, and it is recommended to use the latest version unless you need support for legacy systems.

= Target Platforms =

Applications compiled with this version depend on the [http://www.microsoft.com/downloads/details.aspx?FamilyId=32BC1BEE-A3F9-4C13-9C99-220B62A191EE&displaylang=en Visual C++ 2005 Runtime]. The binaries that are generated run on the following platforms:

  * Windows 98
  * Windows 2000 Service Pack 3
  * Windows Server 2003
  * Windows Server 2008
  * Windows Vista
  * Windows XP

Notably, this is the last version that is able to compile for Windows 98.

= Prerequisites =

  * Microsoft Windows XP SP2/Server 2003 SP2 or above
  * [http://www.microsoft.com/express/2005/download/default.aspx Microsoft Visual C++ 2005 Express Edition]
  * [http://www.microsoft.com/downloads/details.aspx?FamilyId=E6E1C3DF-A74F-4207-8586-711EBE331CDC&displaylang=en Microsoft Windows SDK for Windows Server 2008 and .NET Framework 3.5]

= Installation =

Install the [http://www.microsoft.com/express/2005/download/default.aspx Visual C++ 2005 Express Edition], which you can download and register for free.

You do not need to install MSDN 2005 Express Edition or SQL Server for building Synergy+. If you have no need for these components, you can safely uncheck the options in the installer.

After completing the installation of Visual C++, proceed to installing the [http://www.microsoft.com/downloads/details.aspx?FamilyId=E6E1C3DF-A74F-4207-8586-711EBE331CDC&displaylang=en Microsoft Windows SDK]. 

The Windows SDK installer will present you with a choice of which components to install, defaulting to a near full setup with 1.2 GB download size. If you want to reduce the volume, you can disable _Documentation_ and _Samples_ to bring the download size down to approximately 83 MB.

= Post-Installation Configuration =

Unlike the more recent [CompilingVC2008 VC2008], the 2005 version does not recognize the installed Windows SDK by default and continues to complain with error messages such as `fatal error C1083: Cannot open include file: 'windows.h': No such file or directory`.

To fix this, open the IDE and bring up the options dialog using _Tools > Options..._, navigating to _Projects and Solutions > VC++ Directories_.

In this list, you need to add the paths to the Windows SDK directories. Go through the list box _Show directories for_ and add them according to the following table:

|| *Directories for...* || *Path* ||
|| Executable files || $(!ProgramFiles)\Microsoft SDKs\Windows\v6.1\Bin ||
|| Include files || $(!ProgramFiles)\Microsoft SDKs\Windows\v6.1\Include ||
|| Library files || $(!ProgramFiles)\Microsoft SDKs\Windows\v6.1\Lib ||

Depending on the version and the location of the SDK you just installed, you may need to adjust these paths. Directory types not listed here are not relevant for this SDK.

These changes should be sufficient to enable VC2005 to build native Win32 applications.

= Compiling =

Open the file `vs2005\synergy-plus.sln` in the source tree. This will open a solution with the following projects:
  * *libsynergy:* Shared codebase for the other projects
  * *launcher:* The Synergy+ launcher (synergy.exe)
  * *client:* The Synergy+ client (synergyc.exe)
  * *server:* The Synergy+ server (synergys.exe)
  * *hook:* Hooking library that the server uses to monitor input events (synrgyhk.dll)

Clicking `Build > Build Solution` will attempt to generate the binaries using the default settings. The executables are placed in `vs2005\debug` or `vs2005\release`, depending on which setting is enabled.

= Debugging =

The Synergy executables are, by default, configured to execute with the `--no-daemon` option when run from Visual C++ so they can be debugged from within the IDE. They need a valid configuration file, however, which has to be created using the launcher first.